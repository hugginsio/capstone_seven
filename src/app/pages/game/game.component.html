<!-- Teleporter, Background -->
<div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 z-neg pointer-events-none" [ngClass]="getBackground()"></div>
<!-- <div class="overscroll-none absolute top-0 right-0 z-inf">
  <img src="/assets/game/locations/teleporter-bg1.png" draggable="false" id="teleporter"/>
</div> -->

<!-- Everything Else -->
<div class="h-screen w-screen overscroll-none text-center">

  <!-- Snacks Container -->
  <app-snackbar class="z-inf" [timeout]="5000" position="top"></app-snackbar>

  <!-- Top Right Menu Container -->
  <div class="absolute left-3 top-3 flex space-x-3">
    <div class="menu-btn p-3" (click)="togglePaused()">
      <p>Pause</p>
    </div>
  </div>

  <!-- Top Information Container -->
  <div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 z-50 mt-4 pointer-events-none">
    <p class="p-3">{{ this.gameManager.getCurrentPlayerEnum() === 'PLAYERONE' ? 'Player One' : 'Player Two' }}'s Turn</p>
  </div>

  <!-- Pause Modal Container -->
  <div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 bg-overlay z-50" *ngIf="this.gamePaused">
    <div class="flex flex-row items-center content-center h-full">
      <div class="mx-auto flex flex-col space-y-4 w-1/3 max-w-md">
        <p class="text-5xl font-bold tracking-wide p-4">Paused</p>
        <div class="menu-btn w-full pointer-events-auto" (click)="copyBoardSeed()">
          <div>
            <p>Copy Board Seed</p>
          </div>
        </div>
        <div class="flex space-x-4 w-full">
          <div class="menu-btn-light w-1/3 pointer-events-auto" routerLink="/menu/landing">
            <div>
              <p>Exit</p>
            </div>
          </div>
          <div class="menu-btn w-1/3 pointer-events-auto" (click)="togglePaused()">
            <div>
              <p>Resume</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Trade Modal Container -->
  <div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 bg-overlay z-50 pointer-events-auto" *ngIf="this.isTrading">
    <div class="flex flex-row items-center content-center h-full">
      <div class="mx-auto flex flex-col space-y-4 w-1/3 max-w-lg">
        <p class="text-5xl font-bold tracking-wide p-5">Trading</p>
        <div class="flex flex-col space-y-4 bg-black border-4 border-gray-600 p-4">
          <p class="font-normal">Trades can only be executed once per turn.</p>
          <p>Trade any three for one.</p>
          <div class="flex space-x-4 justify-center">
            <div class="text-center w-full pt-4"
              *ngIf="this.gameManager.getCurrentPlayer().redResources === 0 &&
              this.gameManager.getCurrentPlayer().greenResources === 0 &&
              this.gameManager.getCurrentPlayer().blueResources === 0 && this.gameManager.getCurrentPlayer().yellowResources === 0">
              <p>You have no resources to trade.</p>
            </div>
            <div id="1" class="resource-button-trade relative" *ngIf="this.gameManager.getCurrentPlayer().redResources > 0" (click)="tradingModel.increment(1)">
              <span class="flex w-full h-full absolute items-center justify-center text-3xl">{{ tradingModel.redResources }}</span>
              <img src="/assets/game/Resource-Red.png" class="w-full h-full" draggable="false" />
            </div>
            <div id="2" class="resource-button-trade relative" *ngIf="this.gameManager.getCurrentPlayer().greenResources > 0" (click)="tradingModel.increment(2)">
              <span class="flex w-full h-full absolute items-center justify-center text-3xl">{{ tradingModel.greenResources }}</span>
              <img src="/assets/game/Resource-Green.png" class="w-full h-full" draggable="false" />
            </div>
            <div id="3" class="resource-button-trade relative" *ngIf="this.gameManager.getCurrentPlayer().blueResources > 0" (click)="tradingModel.increment(3)">
              <span class="flex w-full h-full absolute items-center justify-center text-3xl">{{ tradingModel.blueResources }}</span>
              <img src="/assets/game/Resource-Blue.png" class="w-full h-full" draggable="false" />
            </div>
            <div id="4" class="resource-button-trade relative" *ngIf="this.gameManager.getCurrentPlayer().yellowResources > 0" (click)="tradingModel.increment(4)">
              <span class="flex w-full h-full absolute items-center justify-center text-3xl">{{ tradingModel.yellowResources }}</span>
              <img src="/assets/game/Resource-Yellow.png" class="w-full h-full" draggable="false" />
            </div>
          </div>
          <div class="flex justify-center p-4">
            <svg class="w-6 h-6" fill="none" stroke-linecap="round" stroke-linejoin="round"
              stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
              <path d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
            </svg>
          </div>
          <div class="flex space-x-4">
            <div class="resource-button-trade" [ngClass]="tradingModel.dynamicClass(1)" (click)="tradingModel.select(1)">
              <img src="/assets/game/Resource-Red.png" class="w-full h-full" draggable="false" />
            </div>
            <div class="resource-button-trade" [ngClass]="tradingModel.dynamicClass(2)" (click)="tradingModel.select(2)">
              <img src="/assets/game/Resource-Green.png" class="w-full h-full" draggable="false" />
            </div>
            <div class="resource-button-trade" [ngClass]="tradingModel.dynamicClass(3)" (click)="tradingModel.select(3)">
              <img src="/assets/game/Resource-Blue.png" class="w-full h-full" draggable="false" />
            </div>
            <div class="resource-button-trade" [ngClass]="tradingModel.dynamicClass(4)" (click)="tradingModel.select(4)">
              <img src="/assets/game/Resource-Yellow.png" class="w-full h-full" draggable="false" />
            </div>
          </div>
          <div class="flex space-x-4 w-full flex-grow-0">
            <div class="menu-btn-light w-full flex-grow pointer-events-auto" (click)="cancelTrading()">
              <div>
                <p>Cancel</p>
              </div>
            </div>
            <div class="menu-btn w-full flex-grow pointer-events-auto" (click)="executeTrade()">
              <div>
                <p>Trade</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Game Over Modal Container -->
  <div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 bg-overlay z-50" *ngIf="this.gameOver">
    <div class="flex flex-row items-center content-center h-full">
      <div class="mx-auto flex flex-col space-y-4 w-1/3 max-w-lg">
        <p class="text-5xl font-bold tracking-wide p-5">{{ this.gameOverText }}</p>
        <div class="flex flex-col space-y-4 bg-black border-4 border-gray-600 p-3">
          <!-- <p class="text-3xl">Player One</p> -->
          <p class="text-2xl font-normal">{{ this.winningPlayer.currentScore }}</p>
          <div class="flex space-x-4">
            <div class="resource-button-trade">
              <!-- <img src="/assets/game/Resource-Red.png" class="w-full h-full opacity-0" /> -->
            </div>
            <div class="resource-button-trade">
              <!-- <img src="/assets/game/Resource-Green.png" class="w-full h-full" /> -->
            </div>
            <div class="resource-button-trade">
              <!-- <img src="/assets/game/Resource-Blue.png" class="w-full h-full" /> -->
            </div>
          </div>
          <p class="text-2xl font-normal">Player One's largest network was {{ this.winningPlayer.currentLongest }} branches.</p>
          <div class="flex space-x-4 w-full flex-grow-0">
            <div class="menu-btn-light w-full flex-grow pointer-events-auto" routerLink="/menu/landing">
              <div>
                <p>Exit</p>
              </div>
            </div>
            <div class="menu-btn w-full flex-grow pointer-events-auto" routerLink="/menu/new/local">
              <div>
                <p>Play Again</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Player Shards Container -->
  <div class="h-screen w-screen overscroll-none text-center absolute top-0 pointer-events-none right-0 z-40">
    <div class="mx-auto relative w-full h-full"> <!-- keeping this div if max-w becomes an issue here -->
      <div class="absolute bottom-3 left-3">
        <app-player-shard [playerDetail]="this.gameManager.getPlayerOne()" [actionSubject]="this.commLink"
          [playerName]="'Player One'" [currentPlayer]="gameManager.getCurrentPlayerEnum() === 'PLAYERONE'"></app-player-shard>
      </div>
      <div class="absolute bottom-3 right-3">
        <app-player-shard [playerDetail]="this.gameManager.getPlayerTwo()" [actionSubject]="this.commLink"
          [playerName]="'Player Two'" [currentPlayer]="gameManager.getCurrentPlayerEnum() === 'PLAYERTWO'"></app-player-shard>
      </div>
    </div>
  </div>

  <!-- Tiles -->
  <div class="flex flex-row items-center content-center h-full justify-between">
    <div class="gameboard">
      <div class="tile-container">
        <div id="T0" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 0)"></div>
      </div>
      <div class="tile-container">
        <div id="T1" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 1)"></div>
        <div id="T2" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 2)"></div>
        <div id="T3" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 3)"></div>
      </div>
      <div class="tile-container">
        <div id="T4" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 4)"></div>
        <div id="T5" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 5)"></div>
        <div id="T6" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 6)"></div>
        <div id="T7" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 7)"></div>
        <div id="T8" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 8)"></div>
      </div>
      <div class="tile-container">
        <div id="T9" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 9)"></div>
        <div id="T10" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 10)"></div>
        <div id="T11" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 11)"></div>
      </div>
      <div class="tile-container">
        <div id="T12" (click)="clickPiece($event)" class="tile" [ngClass]="assemblePieceClass('T', 12)"></div>
      </div>
    </div>
  </div>
</div>

<!-- Nodes -->
<div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 pointer-events-none">
  <div class="flex flex-row items-center content-center h-full">
    <div class="mx-auto flex flex-col spacing-y-nodes">
      <div class="node-container">
        <div id="N0" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 0)"></div>
        <div id="N1" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 1)"></div>
      </div>
      <div class="node-container">
        <div id="N2" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 2)"></div>
        <div id="N3" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 3)"></div>
        <div id="N4" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 4)"></div>
        <div id="N5" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 5)"></div>
      </div>
      <div class="node-container">
        <div id="N6" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 6)"></div>
        <div id="N7" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 7)"></div>
        <div id="N8" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 8)"></div>
        <div id="N9" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 9)"></div>
        <div id="N10" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 10)"></div>
        <div id="N11" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 11)"></div>
      </div>
      <div class="node-container">
        <div id="N12" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 12)"></div>
        <div id="N13" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 13)"></div>
        <div id="N14" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 14)"></div>
        <div id="N15" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 15)"></div>
        <div id="N16" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 16)"></div>
        <div id="N17" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 17)"></div>
      </div>
      <div class="node-container">
        <div id="N18" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 18)"></div>
        <div id="N19" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 19)"></div>
        <div id="N20" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 20)"></div>
        <div id="N21" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 21)"></div>
      </div>
      <div class="node-container">
        <div id="N22" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 22)"></div>
        <div id="N23" (click)="clickPiece($event)" class="node" [ngClass]="assemblePieceClass('N', 23)"></div>
      </div>
    </div>
  </div>
</div>

<!-- Vertical Branches -->
<div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 pointer-events-none">
  <div class="flex flex-row items-center content-center h-full">
    <div class="mx-auto flex flex-col spacing-y-v-branches">
      <div class="branch-y-container">
        <div id="B1" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 1)"></div>
        <div id="B2" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 2)"></div>
      </div>
      <div class="branch-y-container">
        <div id="B6" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 6)"></div>
        <div id="B7" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 7)"></div>
        <div id="B8" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 8)"></div>
        <div id="B9" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 9)"></div>
      </div>
      <div class="branch-y-container">
        <div id="B15" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 15)"></div>
        <div id="B16" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 16)"></div>
        <div id="B17" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 17)"></div>
        <div id="B18" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 18)"></div>
        <div id="B19" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 19)"></div>
        <div id="B20" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 20)"></div>
      </div>
      <div class="branch-y-container">
        <div id="B26" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 26)"></div>
        <div id="B27" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 27)"></div>
        <div id="B28" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 28)"></div>
        <div id="B29" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 29)"></div>
      </div>
      <div class="branch-y-container">
        <div id="B33" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 33)"></div>
        <div id="B34" (click)="clickPiece($event)" class="branch-y" [ngClass]="assemblePieceClass('BY', 34)"></div>
      </div>
    </div>
  </div>
</div>

<!-- Horizontal Branches -->
<div class="h-screen w-screen overscroll-none text-center absolute top-0 right-0 pointer-events-none">
  <div class="flex flex-row items-center content-center h-full">
    <div class="mx-auto flex flex-col spacing-y-h-branches">
      <div class="branch-x-container">
        <div id="B0" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 0)"></div>
      </div>
      <div class="branch-x-container">
        <div id="B3" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 3)"></div>
        <div id="B4" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 4)"></div>
        <div id="B5" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 5)"></div>
      </div>
      <div class="branch-x-container">
        <div id="B10" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 10)"></div>
        <div id="B11" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 11)"></div>
        <div id="B12" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 12)"></div>
        <div id="B13" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 13)"></div>
        <div id="B14" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 14)"></div>
      </div>
      <div class="branch-x-container">
        <div id="B21" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 21)"></div>
        <div id="B22" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 22)"></div>
        <div id="B23" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 23)"></div>
        <div id="B24" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 24)"></div>
        <div id="B25" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 25)"></div>
      </div>
      <div class="branch-x-container">
        <div id="B30" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 30)"></div>
        <div id="B31" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 31)"></div>
        <div id="B32" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 32)"></div>
      </div>
      <div class="branch-x-container">
        <div id="B35" (click)="clickPiece($event)" class="branch-x" [ngClass]="assemblePieceClass('BX', 35)"></div>
      </div>
    </div>
  </div>
</div>